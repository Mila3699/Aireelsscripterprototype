# üéØ –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º

### üîí –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```typescript
import { 
  sanitizeText, 
  sanitizeFilename, 
  sanitizeUrl,
  isValidVideoMimeType,
  deepSanitize 
} from './lib/sanitizer';

// –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
const safe = sanitizeText(userInput);

// –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
const safeName = sanitizeFilename(file.name);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ URL
const safeUrl = sanitizeUrl(inputUrl);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME —Ç–∏–ø–∞
if (!isValidVideoMimeType(file.type)) {
  throw new Error('–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞');
}

// –ì–ª—É–±–æ–∫–∞—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞
const cleanData = deepSanitize(apiResponse);
```

---

### ‚è±Ô∏è Rate Limiting

```typescript
import { videoAnalysisLimiter } from './lib/rateLimiter';

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
const check = videoAnalysisLimiter.checkLimit();
if (!check.allowed) {
  throw new Error(check.message);
}

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
videoAnalysisLimiter.recordRequest();

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
const status = videoAnalysisLimiter.getStatus();
console.log(`–û—Å—Ç–∞–ª–æ—Å—å: ${status.remainingRequests}/${status.maxRequests}`);

// –°–±—Ä–æ—Å (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
videoAnalysisLimiter.reset();
```

---

## üìã –õ–∏–º–∏—Ç—ã

| –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞ | –õ–∏–º–∏—Ç | –û–∫–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ |
|------------|-------|--------------|
| –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ | 5 –∑–∞–ø—Ä–æ—Å–æ–≤ | 15 –º–∏–Ω—É—Ç |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ | 10 –∑–∞–ø—Ä–æ—Å–æ–≤ | 5 –º–∏–Ω—É—Ç |

---

## üåê –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã

| –ë—Ä–∞—É–∑–µ—Ä | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |
|---------|-------------------|
| Chrome | 80+ (2020+) |
| Firefox | 75+ (2020+) |
| Safari | 13+ (2019+) |
| Edge | 80+ (2020+) |
| iOS | 13+ (2019+) |
| Android | 80+ (2020+) |

---

## üé® –®—Ä–∏—Ñ—Ç—ã

### –û—Å–Ω–æ–≤–Ω–æ–π:
```css
font-family: 'Inter', -apple-system, BlinkMacSystemFont, ...
```

### –î–ª—è –∫–æ–¥–∞:
```css
font-family: 'SF Mono', 'Monaco', 'Inconsolata', ...
```

---

## üõ°Ô∏è Content Security Policy

–†–∞–∑—Ä–µ—à–µ–Ω–æ:
- ‚úÖ `'self'` - —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã
- ‚úÖ `https://fonts.googleapis.com` - Google Fonts
- ‚úÖ `https://fonts.gstatic.com` - —à—Ä–∏—Ñ—Ç—ã
- ‚úÖ `http://localhost:*` - –ª–æ–∫–∞–ª—å–Ω—ã–π backend
- ‚úÖ `blob:` - –≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã

–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:
- ‚ùå `javascript:` URI
- ‚ùå `data:` URI (–∫—Ä–æ–º–µ —à—Ä–∏—Ñ—Ç–æ–≤)
- ‚ùå Inline scripts (–∫—Ä–æ–º–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö)
- ‚ùå –í–Ω–µ—à–Ω–∏–µ —Ñ—Ä–µ–π–º—ã

---

## üß™ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤ Console

```javascript
// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤
window.getComputedStyle(document.body).fontFamily

// 2. –°—Ç–∞—Ç—É—Å rate limiter
localStorage.getItem('ai_reels_video_analysis_limit')

// 3. –°–±—Ä–æ—Å –ª–∏–º–∏—Ç–∞ (–¥–ª—è —Ç–µ—Å—Ç–∞)
localStorage.removeItem('ai_reels_video_analysis_limit')

// 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏
import { sanitizeText } from './lib/sanitizer';
sanitizeText('<script>alert("XSS")</script>')
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "<script>..."
```

---

## üìÅ –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `/lib/sanitizer.ts` | –§—É–Ω–∫—Ü–∏–∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏ |
| `/lib/rateLimiter.ts` | Rate limiting |
| `/index.html` | CSP –∏ meta —Ç–µ–≥–∏ |
| `/.browserslistrc` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ |
| `/styles/globals.css` | –®—Ä–∏—Ñ—Ç—ã |
| `/docs/SECURITY.md` | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –û—á–∏—Å—Ç–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```javascript
// –°–±—Ä–æ—Å rate limiter
localStorage.removeItem('ai_reels_video_analysis_limit');
localStorage.removeItem('ai_reels_save_script_limit');

// –û—á–∏—Å—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
localStorage.removeItem('ai_reels_saved_scripts');

// –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
location.reload();
```

---

## üö® –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ production

- [ ] Backend rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] HTTPS –≤–∫–ª—é—á–µ–Ω
- [ ] API –∫–ª—é—á–∏ –Ω–∞ backend
- [ ] Helmet middleware —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] File scanning –∞–∫—Ç–∏–≤–µ–Ω
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω

---

## üìû –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ `/docs/SECURITY.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìã `/–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨_–û–ë–ù–û–í–õ–ï–ù–û.md` - —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- üß™ `/–¢–ï–°–¢_–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

**–î–∞—Ç–∞:** 10 –Ω–æ—è–±—Ä—è 2025
