# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ó–∞–≤–∏—Å–∞–Ω–∏–µ –Ω–∞ —ç—Ç–∞–ø–µ –∞–Ω–∞–ª–∏–∑–∞ –≤–∏–¥–µ–æ

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–ª–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ "–ü–∏—à–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º..." –ø—Ä–∏ 100% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–ª–æ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.

## üîç –ü—Ä–∏—á–∏–Ω–∞

–í `/supabase/functions/server/index.tsx` –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 198-204 –±—ã–ª –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –∫–æ–¥:

```typescript
// –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Gemini
// (–ö–æ–¥ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ API –∫–ª—é—á–∞)

return c.json({
  success: true,
  message: 'Gemini integration coming soon',
});
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–≥–¥–∞ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `GOOGLE_AI_API_KEY`, —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–ª —Ç–æ–ª—å–∫–æ `{ success: true, message: '...' }` **–ë–ï–ó –ø–æ–ª—è `result`**.

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–ª `data.result` –∏ –ø—ã—Ç–∞–ª—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ `sanitizeAnalysisResult(data.result)`, –ø–æ–ª—É—á–∞—è undefined, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –∑–∞–≤–∏—Å–∞–Ω–∏—é.

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. Backend (server/index.tsx)
- ‚úÖ –£–±—Ä–∞–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ `message: 'Gemini integration coming soon'`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤–æ–∑–≤—Ä–∞—Ç –ø–æ–ª–Ω—ã—Ö –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–ª–∏—á–∏—è API –∫–ª—é—á–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–º–∏—Ç–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (2 —Å–µ–∫—É–Ω–¥—ã) –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏
- ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ API –∫–ª—é—á–∞

### 2. Frontend (api-supabase.ts)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞ —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 3. UI (ProcessingPage.tsx)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ (4 —Å–µ–∫—É–Ω–¥—ã –≤–º–µ—Å—Ç–æ 3.5) –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–∞–π–º–∏–Ω–≥–∞

## üé¨ –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ** ‚Üí Frontend –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Supabase Storage
2. **–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –∞–Ω–∞–ª–∏–∑** ‚Üí Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –Ω–∞ backend
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞** ‚Üí Backend:
   - –°–æ–∑–¥–∞–µ—Ç signed URL –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–∏–¥–µ–æ
   - –ò–º–∏—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É (2 —Å–µ–∫)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Å —Ñ–ª–∞–≥–æ–º `isDemoMode: true`
4. **–ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** ‚Üí Frontend –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—é –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üìä –¢–∞–π–º–∏–Ω–≥

- **ProcessingPage –∞–Ω–∏–º–∞—Ü–∏—è**: 4 —Å–µ–∫—É–Ω–¥—ã (–≤–∏–∑—É–∞–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è)
- **Backend –æ–±—Ä–∞–±–æ—Ç–∫–∞**: 2 —Å–µ–∫—É–Ω–¥—ã (—Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å)
- **–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞**: 60 —Å–µ–∫—É–Ω–¥ (–∑–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è)

## üé≠ –î–µ–º–æ-—Ä–µ–∂–∏–º

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–í–°–ï–ì–î–ê** —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ –¥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Google Gemini AI:
- ‚úÖ –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Supabase Storage
- ‚úÖ Backend —Å–æ–∑–¥–∞–µ—Ç signed URL (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É)
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
- ‚ÑπÔ∏è –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "üé≠ –î–µ–º–æ-—Ä–µ–∂–∏–º: –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å Gemini AI:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `GOOGLE_AI_API_KEY` –≤ Supabase Dashboard ‚Üí Edge Functions ‚Üí Environment Variables
2. –ó–∞–º–µ–Ω–∏—Ç–µ –∫–æ–¥ –≤ `server/index.tsx` (—Å—Ç—Ä–æ–∫–∏ 157-258) –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é:

```typescript
// –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SDK)
import { GoogleGenerativeAI } from 'npm:@google/generative-ai';

const genAI = new GoogleGenerativeAI(apiKey);
const model = genAI.getGenerativeModel({ model: 'gemini-1.5-pro' });

// –°–∫–∞—á–∏–≤–∞–µ–º –≤–∏–¥–µ–æ –ø–æ signed URL
const videoResponse = await fetch(videoUrl);
const videoBuffer = await videoResponse.arrayBuffer();

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Gemini
const result = await model.generateContent([
  {
    inlineData: {
      mimeType: 'video/mp4',
      data: Buffer.from(videoBuffer).toString('base64')
    }
  },
  { text: ANALYSIS_PROMPT }
]);

const analysisData = JSON.parse(result.response.text());
```

3. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–ª–∞–≥ `isDemoMode: false` –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Ä–µ–∞–ª—å–Ω–æ–º –∞–Ω–∞–ª–∏–∑–µ

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ù–µ –∑–∞–≤–∏—Å–∞–µ—Ç
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–≤–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ
- ‚úÖ –ò–º–µ–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤

**–ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —Å–Ω–æ–≤–∞!** üéâ
