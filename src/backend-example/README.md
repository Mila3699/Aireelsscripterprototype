# üé¨ AI Reels Scripter - Backend

Backend —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ (Reels, TikTok) —á–µ—Ä–µ–∑ Google Gemini AI.

---

## ‚ö° –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨?

**–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é:**

üìñ `/üöÄ_–ü–û–®–ê–ì–û–í–ê–Ø_–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–î–ï–ü–õ–û–ô.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è  
‚ö° `/‚ö°_–ë–´–°–¢–†–ê–Ø_–®–ü–ê–†–ì–ê–õ–ö–ê_–î–ï–ü–õ–û–ô.md` - –±—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

**–ö—Ä–∞—Ç–∫–∏–π –ø–ª–∞–Ω:**
1. –°–∫–∞—á–∞—Ç—å 4 —Ñ–∞–π–ª–∞ –∏–∑ —ç—Ç–æ–π –ø–∞–ø–∫–∏
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π my-backend
3. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Render
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å URL backend –≤ —á–∞—Ç

---

## üì¶ –§–ê–ô–õ–´ –î–õ–Ø –î–ï–ü–õ–û–Ø

–í —ç—Ç–æ–π –ø–∞–ø–∫–µ 4 —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ GitHub:

‚úÖ `server.js` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞  
‚úÖ `package.json` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Node.js  
‚úÖ `.env.example` - –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è  
‚úÖ `.gitignore` - —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ Git –Ω–µ –¥–æ–ª–∂–µ–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å  

---

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ Google AI API –∫–ª—é—á–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://makersuite.google.com/app/apikey
2. –í–æ–π–¥–∏—Ç–µ –≤ Google –∞–∫–∫–∞—É–Ω—Ç
3. –ù–∞–∂–º–∏—Ç–µ "Create API Key"
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á
5. –í—Å—Ç–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:
   ```env
   GOOGLE_AI_API_KEY=AIzaSyB...–≤–∞—à_–∫–ª—é—á
   ```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ (`npm start`) –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

- **http://localhost:3001** - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å `{"status":"ok",...}`
- **http://localhost:3001/api/health** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

## üéØ API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### `POST /api/analyze`

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Google AI.

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:3001/api/analyze \
  -F "video=@/path/to/video.mp4"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "original": {
    "transcription": "...",
    "translation": "..."
  },
  "keys": [
    {"title": "...", "description": "..."}
  ],
  "script": [
    {"time": "...", "visual": "...", "text": "...", "note": "..."}
  ],
  "recommendations": [
    {"category": "...", "text": "..."}
  ],
  "_metadata": {
    "processingTime": "35.42",
    "fileSize": "8.50",
    "fileName": "video.mp4",
    "timestamp": "2025-11-09T10:30:00.000Z"
  }
}
```

### `GET /`

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞.

### `GET /api/health`

–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞.

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### ‚ùå "GOOGLE_AI_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env`:
```bash
cat .env
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: GOOGLE_AI_API_KEY=AIzaSyB...
```

### ‚ùå "Cannot find module 'express'"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
npm install
```

### ‚ùå "Port 3001 already in use"

**–†–µ—à–µ–Ω–∏–µ 1:** –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `.env`:
```env
PORT=3002
```

**–†–µ—à–µ–Ω–∏–µ 2:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3001:
```bash
# Mac/Linux
lsof -ti:3001 | xargs kill -9

# Windows
netstat -ano | findstr :3001
taskkill /PID <–Ω–æ–º–µ—Ä_–ø—Ä–æ—Ü–µ—Å—Å–∞> /F
```

### ‚ùå CORS –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL:
```env
FRONTEND_URL=http://localhost:3000
```

## üìä –õ–æ–≥–∏

Backend –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:

```
üìπ –ü–æ–ª—É—á–µ–Ω–æ –≤–∏–¥–µ–æ: test.mp4 (8.50 MB)
üìù MIME —Ç–∏–ø: video/mp4
üîÑ –í–∏–¥–µ–æ —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ base64
ü§ñ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ Google AI...
‚úÖ –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç Google AI (35.42 —Å–µ–∫)
üìä –î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞: 2543 —Å–∏–º–≤–æ–ª–æ–≤
‚úÖ JSON —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω
üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞:
   - –ö–ª—é—á–µ–π –∫ —É—Å–ø–µ—Ö—É: 5
   - –°—Ü–µ–Ω –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏: 5
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π: 4
   - –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: 35.42 —Å–µ–∫
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

```bash
npm run dev
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç `nodemon` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend-example/
‚îú‚îÄ‚îÄ server.js          # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ package.json       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–æ–∑–¥–∞–π—Ç–µ –∏–∑ .env.example)
‚îú‚îÄ‚îÄ .env.example      # –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îî‚îÄ‚îÄ README.md         # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

### Heroku

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Heroku CLI
# 2. –ó–∞–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å
heroku login

# 3. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
heroku create ai-reels-backend

# 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
heroku config:set GOOGLE_AI_API_KEY=your_key_here
heroku config:set FRONTEND_URL=https://your-frontend.com

# 5. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ
git push heroku main
```

### Railway

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ https://railway.app
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç

### DigitalOcean / VPS

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@your-server.com

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# 3. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥
# 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2
npm install -g pm2

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
pm2 start server.js --name ai-reels-backend
pm2 save
pm2 startup
```

## üí∞ –ö–≤–æ—Ç—ã Google AI

### –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω:
- **Gemini 1.5 Flash:** 15 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É, 1,500 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
- **Gemini 1.5 Pro:** 2 –∑–∞–ø—Ä–æ—Å–∞/–º–∏–Ω—É—Ç—É, 50 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å

### –ü–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω:
- –ë–µ–∑ –ª–∏–º–∏—Ç–æ–≤ (pay-as-you-go)
- ~$0.00001875 –∑–∞ 1000 —Å–∏–º–≤–æ–ª–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `gemini-1.5-flash` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [Google AI Docs](https://ai.google.dev/)
- [Node.js Quickstart](https://ai.google.dev/tutorials/node_quickstart)
- [Gemini API Docs](https://ai.google.dev/gemini-api/docs)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT